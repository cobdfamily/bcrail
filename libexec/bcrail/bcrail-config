#!/usr/bin/env bash
set -euo pipefail

BCRAIL_STATE_DIR="${BCRAIL_STATE_DIR:-/var/lib/bcrail}"
BCRAIL_CONFIG_DIR="${BCRAIL_CONFIG_DIR:-/etc/bcrail}"
BCRAIL_LOCOMOTIVE_ENV="${BCRAIL_LOCOMOTIVE_ENV:-${BCRAIL_CONFIG_DIR}/locomotive.env}"
BCRAIL_NETWORK_BRIDGE="${BCRAIL_NETWORK_BRIDGE:-incusbr0}"
BCRAIL_STORAGE_POOL="${BCRAIL_STORAGE_POOL:-default}"

LOCOMOTIVE_ENV_LOADED="no"
if [[ -f "${BCRAIL_LOCOMOTIVE_ENV}" ]]; then
  set -a
  # shellcheck disable=SC1090
  source "${BCRAIL_LOCOMOTIVE_ENV}"
  set +a
  LOCOMOTIVE_ENV_LOADED="yes"
fi

printf '%s\n' "BCRAIL_STATE_DIR=${BCRAIL_STATE_DIR}"
printf '%s\n' "BCRAIL_CONFIG_DIR=${BCRAIL_CONFIG_DIR}"
printf '%s\n' "BCRAIL_LOCOMOTIVE_ENV=${BCRAIL_LOCOMOTIVE_ENV}"
printf '%s\n' "BCRAIL_LOCOMOTIVE_ENV_LOADED=${LOCOMOTIVE_ENV_LOADED}"
printf '%s\n' "BCRAIL_NETWORK_BRIDGE=${BCRAIL_NETWORK_BRIDGE}"
printf '%s\n' "BCRAIL_STORAGE_POOL=${BCRAIL_STORAGE_POOL}"
